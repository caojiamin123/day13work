<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>work26瀑布流</title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
				list-style: none;
			}
			#box{
				margin: 0 auto;
				width: 966px;
				height: auto;
				overflow: hidden;
			}
			#box ul{
				width: 300px;
				float: left;
				border: #000 1px solid;
				margin-right: 20px;
			}
			#box ul li{
				width: 280px;
				margin: 10px 9px;
				border: #666 1px solid;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<ul></ul>
			<ul></ul>
			<ul></ul>
		</div>
	</body>
	<script type="text/javascript">
		function rnd(n,m){
			return parseInt(Math.random()*(m-n)+n);
		}
		
		function createli(){
			var oli=document.createElement("li");
			oli.style.height=rnd(50,300)+"px";
			oli.style.background='rgb('+rnd(0,256)+','+rnd(0,256)+','+rnd(0,256)+')';
			return oli;
		}
		
		
		window.onload=function(){
			var obox=document.getElementById("box");
			var aul=obox.children;
			
			function appendli(){
				for (var i=0;i<15;i++) {
					var oli=createli();
					var iminul;
					var arrul=[];
					for(var j=0;j<aul.length;j++){
						arrul[j]=aul[j];
					}
					arrul.sort(function(n1,n2){
						return n1.offsetHeight-n2.offsetHeight;
					})
					arrul[0].appendChild(oli);
				}
			}
			
			appendli();
			window.onscroll=function(){
				var oscroll=document.documentElement.scrollTop || document.body.scrollTop;
				var clienth=document.documentElement.clientHeight;
				var oboxh=obox.scrollHeight;
				if(oscroll+clienth>=oboxh){
					appendli();	
				}	
			}
			
		}
	</script>
</html>
