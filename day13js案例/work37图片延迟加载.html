<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>work37图片延迟加载</title>
		<style type="text/css">
			img{
				width: 300px;
				height: 300px;
				float: left;
				margin: 10px;
				border: #000  solid 1px;
			}
		</style>
	</head>
	<body>
		<img _src="img/b1.jpg" alt=""/>
		<img _src="img/b2.jpg" alt=""/>
		<img _src="img/b3.jpg" alt=""/>
		<img _src="img/b4.jpg" alt=""/>
		<img _src="img/b5.jpg" alt=""/>
		<img _src="img/b6.jpg" alt=""/>
		<img _src="img/b7.jpg" alt=""/>
		<img _src="img/b8.jpg" alt=""/>
		<img _src="img/b9.jpg" alt=""/>
		<img _src="img/b10.jpg" alt=""/>
	</body>
	<script type="text/javascript">
		function getphoto(obj){
			var l=0;
			var t=0;
			while(obj){
				l+=obj.offsetLeft;
				t+=obj.offsetTop;
				obj=obj.offsetParent;
			}
			return {left:l,top:t};
		}
		
		window.onload=window.onscroll=window.onresize=function(){
			var aimg=document.getElementsByTagName('img');
			var oscroll=document.documentElement.scrollTop || document.body.scrollTop;
			var clienth=document.documentElement.clientHeight;
				for (var i=0;i<aimg.length;i++) {
					var imgtop=getphoto(aimg[i]).top;
					if(oscroll+clienth>=imgtop){
						aimg[i].src=aimg[i].getAttribute('_src')
					}
				}
			
		}
	</script>
</html>
